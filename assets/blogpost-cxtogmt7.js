import{j as e}from"./ui-vendor-C-NzF8rS.js";import{f as t,r as s,L as a}from"./react-vendor-dEak5Vpg.js";import{H as o,F as r}from"./Footer-5j2EL-zX.js";import{B as i}from"./button-DDg2AWne.js";import{g as n}from"./blogStore-DZjRwE19.js";import{u as l,f as d}from"./index-C8K582Q_.js";import{S as c}from"./Seo-C5zCGxv8.js";function m(t){try{const s=new URL(t);if(s.hostname.includes("youtube.com")||s.hostname.includes("youtu.be")){let t="";if(t=s.hostname.includes("youtu.be")?s.pathname.slice(1):s.searchParams.get("v")||"",t){const s=`https://www.youtube.com/embed/${t}`;return e.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0},children:e.jsx("iframe",{src:s,title:"Video",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}}return t.endsWith(".mp4")||t.includes(".mp4?")?e.jsxs("video",{controls:!0,className:"w-full rounded-md",children:[e.jsx("source",{src:t}),"Your browser does not support the video tag."]}):e.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0},children:e.jsx("iframe",{src:t,title:"Video",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:0,allowFullScreen:!0})})}catch(s){return null}}const u=()=>{const{id:u}=t(),{toast:h}=l(),[p,x]=s.useState(null),[g,f]=s.useState(!0),[j,y]=s.useState(null);s.useEffect(()=>{u&&(async()=>{try{f(!0);const e=await n(u);e?x(e):y("Article not found.")}catch(e){const t=d(e);y(t),h({title:"Error loading article",description:t,variant:"destructive"})}finally{f(!1)}})()},[u,h]);const b=s.useMemo(()=>{if(!(null==p?void 0:p.content))return;return p.content.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim().slice(0,160)},[p]);return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(o,{}),p&&e.jsx(c,{title:`${p.title} – Kirtase Hidayah`,description:b,image:p.image,url:"undefined"!=typeof window?`${window.location.origin}/blog/${u}`:`/blog/${u}`,type:"article",structuredData:{"@context":"https://schema.org","@type":"BlogPosting",headline:p.title,datePublished:p.created_at,author:p.author?{"@type":"Person",name:p.author}:void 0,image:p.image,mainEntityOfPage:"undefined"!=typeof window?`${window.location.origin}/blog/${u}`:`/blog/${u}`}}),e.jsx("div",{className:"pt-32 pb-20 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsx(a,{to:"/blog",children:e.jsx(i,{variant:"ghost",className:"mb-6",children:"← Back to articles"})}),g?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading article..."})]}):j?e.jsx("div",{className:"glass-card p-8 text-center",children:e.jsx("p",{className:"text-destructive",children:j})}):p?e.jsxs("article",{className:"glass-card p-8 animate-fade-in",children:[p.image&&e.jsx("img",{src:p.image,alt:p.title,loading:"lazy",decoding:"async",className:"w-full h-64 object-cover rounded-md mb-6"}),p.video_url&&e.jsx("div",{className:"mb-6",children:m(p.video_url)}),e.jsx("h1",{className:"text-4xl font-bold text-gradient-emerald mb-4",children:p.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-gold/20 text-gold text-xs font-medium rounded-full",children:p.category}),e.jsx("span",{children:p.author}),e.jsx("span",{children:"•"}),e.jsx("span",{children:(v=p.created_at,new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]}),e.jsx("div",{className:"prose max-w-none text-muted-foreground",dangerouslySetInnerHTML:{__html:p.content}})]}):e.jsx("div",{className:"text-center py-12",children:"No post found."})]})}),e.jsx(r,{})]});var v};export{u as default};
